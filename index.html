<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Eiffel-remrem-generate : eiffel-remrem-generate">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Eiffel-remrem-generate</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Ericsson/eiffel-remrem-generate">View on GitHub</a>

          <h1 id="project_title">Eiffel-remrem-generate</h1>
          <h2 id="project_tagline">eiffel-remrem-generate</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Ericsson/eiffel-remrem-generate/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Ericsson/eiffel-remrem-generate/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>REMReM (REST Mailbox for Registered Messages) is a set of tools that can be used to generate validated Eiffel messages and publish them on a RabbitMQ message bus. They can be run as micro services or as stand-alone CLI versions. For more details on the micro services and the REMReM design, see <a href="https://github.com/Ericsson/eiffel-remrem">https://github.com/Ericsson/eiffel-remrem</a> </p>

<p>Generate takes a partial message in JSON format, validates it and adds mandatory fields before outputting a complete, valid Eiffel message.</p>

<h2>
<a id="compatibility" class="anchor" href="#compatibility" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Compatibility</h2>

<ul>
<li>JDK 8</li>
<li>Tomcat 7</li>
</ul>

<h2>
<a id="the-releases" class="anchor" href="#the-releases" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The releases</h2>

<p>Binary is relased via <a href="https://jitpack.io/#Ericsson/eiffel-remrem-generate">jitPack</a>.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation (Micro service)</h2>

<p>Start the self executing WAR</p>
<pre>java -jar generate.war</pre>

<p>or deploy it in Tomcat.</p>

<h2>
<a id="usage-cli-command-line-interface" class="anchor" href="#usage-cli-command-line-interface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage CLI (Command Line Interface).</h2>

<p>Examples used here are for the next generation of Eiffel events called semantics which is open source. Please follow <a href="https://github.com/Ericsson/eiffel/tree/master/eiffel-syntax-and-usage">eiffel syntax</a> and <a href="https://github.com/Ericsson/eiffel/tree/master/eiffel-vocabulary">eiffel vocabulary</a></p>

<pre>java -jar generate.war -h
You passed help flag.
usage: java -jar
 -d,--debug                  enable debug traces
 -f,--content_file           message content file
 -h,--help                   show help.
 -json,--json_content        json content
 -mp,--messaging_protocol    name of messaging protocol to be used,
                             e.g. eiffel3, semantics
 -r,--response_file          file to store the response in, optional
 -t,--message_type           message type, mandatory if -f or -json
                             is given
</pre>
<p>NOTE: The message type is the name of the event type to send without the suffix <em>event</em> and in small case letters, for example <em>eiffelactivityfinished</em> for an <em>EiffelActivityFinishedEvent</em>.</p>

<p>The message must exist in a json file, for example <strong><em>EiffelActivityFinishedEvent.json</em></strong> might contain the following message:<br></p>
<pre>
{
   "msgParams":{
      "meta":{
         "type":"EiffelActivityFinishedEvent",
         "domainId":"example.domain",
         "tags":[
            "tag1",
            "tag2"
         ],
         "source":{
            "host":"host",
            "name":"name",
            "uri":"http://java.sun.com/j2se/1.3/",
            "serializer":{
               "groupId":"G",
               "artifactId":"A",
               "version":"V"
            }
         }
      }
   },
   "eventParams":{
      "data":{
         "outcome":{
            "conclusion":"TIMED_OUT",
            "description":"Compilation timed out."
         },
         "persistentLogs":[
            {
               "name":"firstLog",
               "uri":"http://myHost.com/firstLog"
            },
            {
               "name":"otherLog",
               "uri":"isbn:0-486-27557-4"
            }
         ]
      },
      "links":{
         "activityExecution":"aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeee1",
         "causes":[
            "cause1",
            "cause2"
         ],
         "flowContext":"flowContext"
      }
   }
}</pre>

<h3>
<a id="with-input-from-the-example-file-shown-above-and-output-to-a-file" class="anchor" href="#with-input-from-the-example-file-shown-above-and-output-to-a-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>With input from the example file shown above and output to a file:</h3>

<pre><code> $ java -jar generate.war -f EiffelActivityFinishedEvent.json -t eiffelactivityfinished -r output.json
</code></pre>

<p>Gives:</p>

<pre>$cat output.json
[
  {
    "data": {
      "outcome": {
        "conclusion": "TIMED_OUT",
        "description": "Compilation timed out."
      },
      "persistentLogs": [
        {
          "name": "firstLog",
          "uri": "http://myHost.com/firstLog"
        },
        {
          "name": "otherLog",
          "uri": "isbn:0-486-27557-4"
        }
      ]
    },
    "links": {
      "activityExecution": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeee1",
      "flowContext": "flowContext",
      "causes": [
        "cause1",
        "cause2"
      ]
    },
    "meta": {
      "domainId": "example.domain",
      "id": "2075b7d1-83a6-47c8-af1d-1d0f451b1f81",
      "type": "eiffelactivityfinished",
      "version": "0.1.0",
      "time": 1473767230905,
      "tags": [
        "tag1",
        "tag2"
      ],
      "source": {
        "host": "host",
        "name": "name",
        "uri": "http://java.sun.com/j2se/1.3/",
        "serializer": {
          "groupId": "G",
          "artifactId": "A",
          "version": "V"
        }
      }
    }
  }
]</pre>

<h3>
<a id="same-example-but-output-the-result-on-the-console" class="anchor" href="#same-example-but-output-the-result-on-the-console" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Same example but output the result on the console:</h3>

<pre><code> $ java -jar generate.war -f EiffelActivityFinishedEvent.json -t eiffelactivityfinished
</code></pre>

<p>Gives:</p>

<pre>[{"data":{"outcome":{"conclusion":"TIMED_OUT","description":"Compilation timed out."},"persistentLogs":[{"name":"firstLog","uri":"http://myHost.com/firstLog"},{"name":"otherLog","uri":"isbn:0-486-27557-4"}]},"links":{"activityExecution":"aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeee1","flowContext":"flowContext","causes":["cause1","cause2"]},"meta":{"domainId":"example.domain","id":"babcdb18-b3c8-46c0-8169-684733bf5ac9","type":"eiffelactivityfinished","version":"0.1.6-PBN2","time":1477033634382,"tags":["tag1","tag2"],"source":{"host":"host","name":"name","uri":"http://java.sun.com/j2se/1.3/","serializer":{"groupId":"G","artifactId":"A","version":"V"}}}}]</pre>

<h3>
<a id="same-example-but-this-time-the-data-is-supplied-as-a-command-line-argument" class="anchor" href="#same-example-but-this-time-the-data-is-supplied-as-a-command-line-argument" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Same example, but this time the data is supplied as a command line argument:</h3>

<pre><code>$ java -jar generate.war -t eiffelactivityfinished -json {"msgParams": {"meta": {"type":"EiffelActivityFinishedEvent","domainId": "example.domain","tags": ["tag1", "tag2"],"source": {"host": "host","name": "name","uri": "http://java.sun.com/j2se/1.3/","serializer": {"groupId": "G","artifactId": "A",       "version": "V"}}}},"eventParams": {"data": {"outcome": {"conclusion": "TIMED_OUT","description": "Compilation timed out."},"persistentLogs": [{"name": "firstLog","uri": "http://myHost.com/firstLog"},{"name": "otherLog","uri": "isbn:0-486-27557-4"}]},"links": {"activityExecution": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeee1","causes": ["cause1", "cause2"],"flowContext": "flowContext"}}}
</code></pre>

<p>Gives:</p>

<pre>[{"data":{"outcome":{"conclusion":"TIMED_OUT","description":"Compilation timed out."},"persistentLogs":[{"name":"firstLog","uri":"http://myHost.com/firstLog"},{"name":"otherLog","uri":"isbn:0-486-27557-4"}]},"links":{"activityExecution":"aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeee1","flowContext":"flowContext","causes":["cause1","cause2"]},"meta":{"domainId":"example.domain","id":"babcdb18-b3c8-46c0-8169-684733bf5ac9","type":"eiffelactivityfinished","version":"0.1.6-PBN2","time":1477033634382,"tags":["tag1","tag2"],"source":{"host":"host","name":"name","uri":"http://java.sun.com/j2se/1.3/","serializer":{"groupId":"G","artifactId":"A","version":"V"}}}}]</pre>

<h2>
<a id="usage-rest-service" class="anchor" href="#usage-rest-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage REST service.</h2>

<p>Examples used here are for the next generation of Eiffel events called semantics which is open source. Please follow <a href="https://github.com/Ericsson/eiffel/tree/master/eiffel-syntax-and-usage">eiffel syntax</a> and <a href="https://github.com/Ericsson/eiffel/tree/master/eiffel-vocabulary">eiffel vocabulary</a></p>

<p>Available REST resources for publish are:</p>

<p><table width="100%">
<tr><th>Resource</th><th>Method</th><th>Parameters</th><th>Request body</th></tr>
<tr><td>/eiffelsemantics</td><td>POST</td><td>msgType</td><td style="margin:0px;"><pre>
{
  "msgParams": {
    "meta": {
      # Matches the meta object
    }
  },
  "eventParams": {
    "data": {
      # Matches the data object
    },
    "links": {
      # Matches the links object
    }
  }
}
</pre></td></tr></table>
</p>

<h2>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Testing</h2>

<h3>
<a id="example-with-event-body-passed-to-service" class="anchor" href="#example-with-event-body-passed-to-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example with event body passed to service:<br>
</h3>

<pre>curl -H "Content-Type: application/json" -X POST -d '
  {"msgParams": {
  "meta": {
    "type": "EiffelActivityFinishedEvent",
    "domainId": "example.domain",
    "tags": ["tag1", "tag2"],
    "source": {
      "host": "host",
      "name": "name",
      "uri": "http://java.sun.com/j2se/1.3/",
      "serializer": {
        "groupId": "G",
        "artifactId": "A",
        "version": "V"
      }
    }
  }
},
  "eventParams": {
    "data": {
      "outcome": {
        "conclusion": "TIMED_OUT",
        "description": "Compilation timed out."
      },
      "persistentLogs": [
        {
          "name": "firstLog",
          "uri": "http://myHost.com/firstLog"
        },
        {
          "name": "otherLog",
          "uri": "isbn:0-486-27557-4"
        }
      ]
    },
    "links": {
      "activityExecution": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeee1",
      "causes": ["cause1", "cause2"],
      "flowContext": "flowContext"
    }
  }
}' http://localhost:8080/eiffelsemantics?msgType=eiffelactivityfinished</pre>

<h3>
<a id="example-with-event-body-in-a-file-body-singlejson-passed-to-service" class="anchor" href="#example-with-event-body-in-a-file-body-singlejson-passed-to-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example with event body in a file body-single.json passed to service:<br>
</h3>

<pre>curl -XPOST -H "Content-Type: application/json" --data @body-single.json http://localhost:8080/eiffelsemantics?msgType=eiffelactivityfinished</pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Eiffel-remrem-generate maintained by <a href="https://github.com/evasiba-ericsson">evasiba-ericsson</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

  </body>
</html>
